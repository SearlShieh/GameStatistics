<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>æ¸¸æˆæ•°æ®ç»Ÿè®¡ç³»ç»Ÿ</title>
  <!-- Vue2 -->
  <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
  <!-- Element UI -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-ui@2.15.13/lib/theme-chalk/index.css">
  <script src="https://cdn.jsdelivr.net/npm/element-ui@2.15.13/lib/index.js"></script>
  <script src="./gameConfig.js"></script>
  <script src="./gameMethods.js"></script>
  <!-- æ¸¸æˆé£æ ¼å­—ä½“ -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
  <link href="./index.css" rel="stylesheet">
</head>
<body>
  <div id="app" class="game-container">
    <!-- å¼¹çª—é®ç½©å±‚ï¼ˆæ–°å¢ï¼‰ -->
    <div class="modal-mask" v-if="showRule" @click="showRule = false"></div>
    
    <!-- æ¸¸æˆè§„åˆ™å¼¹çª— -->
    <div class="rule-modal" v-if="showRule">
      <h3 class="rule-title">ğŸ® æ¸¸æˆæ•°æ®ç»Ÿè®¡è§„åˆ™</h3>
      <div class="rule-content">
        <p>1. å…±è®°å½•6æŠŠæ¸¸æˆçš„å¸¦å‡ºç‰©å“å’Œé‡‘é¢æ•°æ®</p>
        <p>2. æ¯æŠŠæ¸¸æˆå¯è®°å½•å¤šç§ç‰©å“çš„å¸¦å‡ºæ•°é‡</p>
        <p>3. å¡«å†™å®Œæˆåç‚¹å‡»"ä¿å­˜å½“å‰å±€"æŒ‰é’®æäº¤æ•°æ®</p>
        <p>4. ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦æ»¡è¶³å½©è›‹æ¡ä»¶</p>
        <p>5. å½©è›‹è§¦å‘æ—¶ä¼šæœ‰æ‰è½åŠ¨ç”»æç¤º</p>
        <p>6. æ‰€æœ‰æ•°æ®å®æ—¶ç»Ÿè®¡ï¼Œå¯åœ¨é¡µé¢ä¸‹æ–¹æŸ¥çœ‹æ±‡æ€»ç»“æœ</p>
      </div>
      <!-- ä¼˜åŒ–å…³é—­æŒ‰é’® -->
      <el-button 
        type="success" 
        @click="showRule = false" 
        class="close-btn"
        :loading="false"
      >
        å¼€å§‹ç»Ÿè®¡
      </el-button>
    </div>
    
    <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
    <div class="progress-indicator" v-if="!showRule">
      <div class="progress-dot" :class="{active: gameIndex === 0}"></div>
      <div class="progress-dot" :class="{active: gameIndex === 1}"></div>
      <div class="progress-dot" :class="{active: gameIndex === 2}"></div>
      <div class="progress-dot" :class="{active: gameIndex === 3}"></div>
      <div class="progress-dot" :class="{active: gameIndex === 4}"></div>
      <div class="progress-dot" :class="{active: gameIndex === 5}"></div>
    </div>
    
    <!-- æ¸¸æˆæ•°æ®å½•å…¥å¡ç‰‡ -->
    <div class="game-card" v-if="!showRule">
      <div class="game-card-header">
        <h3 class="game-card-title">ç¬¬ {{ gameIndex + 1 }} å±€æ¸¸æˆæ•°æ®</h3>
        <el-button type="text" @click="showRule = true" style="color: #00ccff;">æŸ¥çœ‹è§„åˆ™</el-button>
      </div>
      
      <div class="item-list">
        <div class="item-row">
          <label class="item-label">é»„é‡‘é’¥åŒ™ï¼š</label>
          <el-input 
            v-model="currentGame.goldenKey" 
            type="number" 
            min="0" 
            class="item-input"
            placeholder="è¾“å…¥æ•°é‡"
          ></el-input>
        </div>
        
        <div class="item-row">
          <label class="item-label">é’»çŸ³ï¼š</label>
          <el-input 
            v-model="currentGame.diamond" 
            type="number" 
            min="0" 
            class="item-input"
            placeholder="è¾“å…¥æ•°é‡"
          ></el-input>
        </div>
        
        <div class="item-row">
          <label class="item-label">ç¨€æœ‰è£…å¤‡ï¼š</label>
          <el-input 
            v-model="currentGame.rareEquipment" 
            type="number" 
            min="0" 
            class="item-input"
            placeholder="è¾“å…¥æ•°é‡"
          ></el-input>
        </div>
        
        <div class="item-row">
          <label class="item-label">èƒ½é‡æ ¸å¿ƒï¼š</label>
          <el-input 
            v-model="currentGame.energyCore" 
            type="number" 
            min="0" 
            class="item-input"
            placeholder="è¾“å…¥æ•°é‡"
          ></el-input>
        </div>
        
        <div class="item-row">
          <label class="item-label">å¸¦å‡ºé‡‘é¢ï¼š</label>
          <el-input 
            v-model="currentGame.money" 
            type="number" 
            min="0" 
            class="item-input"
            placeholder="è¾“å…¥é‡‘é¢"
          ></el-input>
        </div>
        
        <div class="item-row">
          <label class="item-label">å…¶ä»–ç‰©å“ï¼š</label>
          <el-input 
            v-model="currentGame.otherItems" 
            type="text" 
            class="item-input"
            placeholder="å¯è¾“å…¥å…¶ä»–ç‰©å“"
          ></el-input>
        </div>
      </div>
      
      <div class="btn-group">
        <el-button 
          type="primary" 
          @click="prevGame" 
          :disabled="gameIndex === 0"
        >
          ä¸Šä¸€å±€
        </el-button>
        <el-button 
          type="success" 
          @click="saveCurrentGame"
        >
          ä¿å­˜å½“å‰å±€
        </el-button>
        <el-button 
          type="primary" 
          @click="nextGame" 
          :disabled="gameIndex === 5"
        >
          ä¸‹ä¸€å±€
        </el-button>
      </div>
    </div>
    
    <!-- ç»Ÿè®¡ç»“æœåŒºåŸŸ -->
    <div class="stats-section" v-if="!showRule && gameData.some(item => item.saved)">
      <h3 class="stats-title">ğŸ“Š ç»Ÿè®¡æ±‡æ€»</h3>
      <div class="stats-item">
        <span class="stats-label">å·²å®Œæˆå±€æ•°ï¼š</span>
        <span class="stats-value">{{ completedGames }} / 6</span>
      </div>
      <div class="stats-item">
        <span class="stats-label">æ€»é»„é‡‘é’¥åŒ™ï¼š</span>
        <span class="stats-value">{{ totalGoldenKey }}</span>
      </div>
      <div class="stats-item">
        <span class="stats-label">æ€»é’»çŸ³ï¼š</span>
        <span class="stats-value">{{ totalDiamond }}</span>
      </div>
      <div class="stats-item">
        <span class="stats-label">æ€»ç¨€æœ‰è£…å¤‡ï¼š</span>
        <span class="stats-value">{{ totalRareEquipment }}</span>
      </div>
      <div class="stats-item">
        <span class="stats-label">æ€»å¸¦å‡ºé‡‘é¢ï¼š</span>
        <span class="stats-value">{{ totalMoney }} é‡‘å¸</span>
      </div>
      <div class="stats-item">
        <span class="stats-label">è§¦å‘å½©è›‹æ•°ï¼š</span>
        <span class="stats-value">{{ totalEggs }}</span>
      </div>
    </div>
    
    <!-- å½©è›‹åŠ¨ç”»å®¹å™¨ -->
    <div class="egg-container" ref="eggContainer"></div>
  </div>

  <script>
    // 3. åˆå§‹åŒ– Vue å®ä¾‹ï¼Œç›´æ¥å¼•å…¥å¤–éƒ¨æ–¹æ³•/è®¡ç®—å±æ€§
    document.addEventListener('DOMContentLoaded', function() {
      new Vue({
        el: '#app',
        data() {
          return {
            count: 0 // é¡µé¢æ•°æ®ä»åœ¨ Vue å®ä¾‹ä¸­
          };
        },
        computed: {
          ...window.Game.computed
        },
        methods: {
          ...window.Game.methods
        }
      });
    });
  </script>

  <!-- <script>
    new Vue({
      el: '#app',
      data() {
        return {
          showRule: true, // æ˜¯å¦æ˜¾ç¤ºæ¸¸æˆè§„åˆ™
          gameIndex: 0, // å½“å‰æ¸¸æˆå±€æ•°ç´¢å¼•ï¼ˆ0-5ï¼‰
          // æ¸¸æˆæ•°æ®ç»“æ„
          gameData: [
            { goldenKey: 0, diamond: 0, rareEquipment: 0, energyCore: 0, money: 0, otherItems: '', saved: false },
            { goldenKey: 0, diamond: 0, rareEquipment: 0, energyCore: 0, money: 0, otherItems: '', saved: false },
            { goldenKey: 0, diamond: 0, rareEquipment: 0, energyCore: 0, money: 0, otherItems: '', saved: false },
            { goldenKey: 0, diamond: 0, rareEquipment: 0, energyCore: 0, money: 0, otherItems: '', saved: false },
            { goldenKey: 0, diamond: 0, rareEquipment: 0, energyCore: 0, money: 0, otherItems: '', saved: false },
            { goldenKey: 0, diamond: 0, rareEquipment: 0, energyCore: 0, money: 0, otherItems: '', saved: false }
          ],
          totalEggs: 0, // æ€»è§¦å‘å½©è›‹æ•°
          // å½©è›‹è§„åˆ™é…ç½®
          eggRules: [
            {
              name: "é»„é‡‘ä¹‹æ‰‹",
              condition: (game) => game.goldenKey >= 5,
              description: "å•å±€å¸¦å‡º5æŠŠä»¥ä¸Šé»„é‡‘é’¥åŒ™ï¼"
            },
            {
              name: "é’»çŸ³å¤§äº¨",
              condition: (game) => game.diamond >= 10,
              description: "å•å±€å¸¦å‡º10é¢—ä»¥ä¸Šé’»çŸ³ï¼"
            },
            {
              name: "è£…å¤‡å¤§å¸ˆ",
              condition: (game) => game.rareEquipment >= 3,
              description: "å•å±€å¸¦å‡º3ä»¶ä»¥ä¸Šç¨€æœ‰è£…å¤‡ï¼"
            },
            {
              name: "è´¢å¯Œå¯†ç ",
              condition: (game) => game.money >= 10000,
              description: "å•å±€å¸¦å‡º10000é‡‘å¸ä»¥ä¸Šï¼"
            },
            {
              name: "èƒ½é‡æŒæ§è€…",
              condition: (game) => game.energyCore >= 8,
              description: "å•å±€å¸¦å‡º8ä¸ªä»¥ä¸Šèƒ½é‡æ ¸å¿ƒï¼"
            },
            {
              name: "å…¨èƒ½æˆ˜ç¥",
              condition: (game) => game.goldenKey >= 3 && game.diamond >= 5 && game.rareEquipment >= 2,
              description: "å•å±€é›†é½å¤šç§ç¨€æœ‰ç‰©å“ï¼"
            }
          ]
        };
      },
      computed: {
        // å½“å‰æ¸¸æˆæ•°æ®
        currentGame() {
          return this.gameData[this.gameIndex];
        },
        // å·²å®Œæˆå±€æ•°
        completedGames() {
          return this.gameData.filter(game => game.saved).length;
        },
        // æ€»é»„é‡‘é’¥åŒ™
        totalGoldenKey() {
          return this.gameData.reduce((total, game) => total + Number(game.goldenKey || 0), 0);
        },
        // æ€»é’»çŸ³
        totalDiamond() {
          return this.gameData.reduce((total, game) => total + Number(game.diamond || 0), 0);
        },
        // æ€»ç¨€æœ‰è£…å¤‡
        totalRareEquipment() {
          return this.gameData.reduce((total, game) => total + Number(game.rareEquipment || 0), 0);
        },
        // æ€»å¸¦å‡ºé‡‘é¢
        totalMoney() {
          return this.gameData.reduce((total, game) => total + Number(game.money || 0), 0);
        }
      },
      methods: {
        // ä¿å­˜å½“å‰å±€æ•°æ®
        saveCurrentGame() {
          this.gameData[this.gameIndex].saved = true;
          
          // æ£€æµ‹å½©è›‹
          this.checkEggs();
          
          // æç¤ºä¿å­˜æˆåŠŸ
          this.$message.success(`ç¬¬ ${this.gameIndex + 1} å±€æ•°æ®ä¿å­˜æˆåŠŸï¼`);
        },
        // ä¸Šä¸€å±€
        prevGame() {
          if (this.gameIndex > 0) {
            this.gameIndex--;
          }
        },
        // ä¸‹ä¸€å±€
        nextGame() {
          if (this.gameIndex < 5) {
            this.gameIndex++;
          }
        },
        // æ£€æµ‹å½©è›‹
        checkEggs() {
          const currentGame = this.currentGame;
          const triggeredEggs = this.eggRules.filter(rule => rule.condition(currentGame));
          
          if (triggeredEggs.length > 0) {
            this.totalEggs += triggeredEggs.length;
            // æ˜¾ç¤ºå½©è›‹åŠ¨ç”»
            triggeredEggs.forEach(egg => {
              this.showEggAnimation(egg);
            });
          }
        },
        // æ˜¾ç¤ºå½©è›‹åŠ¨ç”»
        showEggAnimation(egg) {
          const eggContainer = this.$refs.eggContainer;
          
          // åˆ›å»ºå½©è›‹å…ƒç´ 
          const eggElement = document.createElement('div');
          eggElement.className = 'egg';
          // éšæœºä½ç½®
          eggElement.style.left = `${Math.random() * 80 + 10}%`;
          eggContainer.appendChild(eggElement);
          
          // åˆ›å»ºå½©è›‹æç¤º
          const toastElement = document.createElement('div');
          toastElement.className = 'egg-toast';
          toastElement.innerHTML = `<strong>ğŸ‰ ${egg.name} ğŸ‰</strong><br>${egg.description}`;
          toastElement.style.left = `${Math.random() * 70 + 15}%`;
          eggContainer.appendChild(toastElement);
          
          // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
          setTimeout(() => {
            eggElement.remove();
            toastElement.remove();
          }, 3000);
        }
      }
    });
  </script> -->
</body>
</html>
