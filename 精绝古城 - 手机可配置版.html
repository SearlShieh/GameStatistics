<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>精绝古城-极限</title>
  <!-- 引入 Vue.js -->
  <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
  <!-- 引入 Element UI 样式 -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <!-- 引入 Element UI 组件库 -->
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
  <style>
    .container {
      margin: 0 auto;
      padding: 20px;
    }
    .image-gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .image-card {
      width: calc(33.333% - 20px);
      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
    }
    .image-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.2);
    }
    .image-title {
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }
    h1 {
      color: #303133;
      text-align: center;
      margin-bottom: 30px;
    }
    @media (max-width: 768px) {
      .image-card {
        width: calc(50% - 20px);
      }
    }
    @media (max-width: 480px) {
      .image-card {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="container" style="width: 1000px;overflow: auto;">
      <h1>精绝古城</h1>

      <el-input v-model="api"></el-input>
      
      <!-- Element UI 图片展示区域 -->
      <div class="image-gallery">
        <el-tabs @tab-click="tabChange" v-model="activeName" type="card">
          <el-tab-pane v-for="item in images" :label="`${item.label}`" :name="item.label">

            <el-tabs v-model="activeName2" type="card">
              <el-tab-pane v-for="child in item.data.filter(i=>i.size>0)" :label="`${child.label}（${child.size}）`" :name="child.label">
               <div>
                <div v-for="file in child.size"  
                style="width: 1400px;display: flex;align-items: center;justify-content: flex-start;margin-bottom: 20px">
                  <img 
                  v-if="file<=child.bz"
                  :src="getImage(item, child, file, true)"
                  @click="goImage(getImage(item, child, file, true))"
                  style="margin-right: 20px;height: 600px;"
                  >  
                <img 
                v-else
                  @click="goImage(getImage(item, child, file))"
                  :src="getImage(item, child, file)"
                  style="margin-right: 20px;height: 600px;"
                  >
                </div>
               </div>
              </el-tab-pane>
            </el-tabs>
          </el-tab-pane>
        </el-tabs>
      </div>
      
      <!-- Element UI 分页组件 -->
      <!-- <el-pagination
        @size-change="handleSizeChange"
        @current-change="handleCurrentChange"
        :current-page="currentPage"
        :page-sizes="[6, 12, 18, 24]"
        :page-size="pageSize"
        layout="total, sizes, prev, pager, next, jumper"
        :total="filteredImages.length"
        style="margin-top: 30px; text-align: center;">
      </el-pagination> -->
    </div>
  </div>

  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          images: [
            {label: '■', data: [
              {label: '上', size: 1, bz: 0},
              {label: '右', size: 0, bz: 0},
              {label: '下', size: 0, bz: 0},
              {label: '左', size: 1, bz: 1}
            ]},
            {label: '▌', data: [
              {label: '上', size: 6, bz: 1},
              {label: '右', size: 6, bz: 1},
              {label: '下', size: 15, bz: 0},
              {label: '左', size: 6, bz: 1}
            ]},
            {label: '▃', data: [
              {label: '上', size: 10, bz: 0},
              {label: '右', size: 5, bz: 0},
              {label: '下', size: 2, bz: 0},
              {label: '左', size: 6, bz: 0}
            ]},
            {label: '┫', data: [
              {label: '上', size: 0, bz: 0},
              {label: '右', size: 0, bz: 0},
              {label: '下', size: 3, bz: 1},
              {label: '左', size: 3, bz: 1}
            ]},
            {label: '┣', data: [
              {label: '上', size: 2, bz: 0},
              {label: '右', size: 2, bz: 0},
              {label: '下', size: 4, bz: 0},
              {label: '左', size: 0, bz: 0}
            ]},
            {label: '┻', data: [
              {label: '上', size: 4, bz: 0},
              {label: '右', size: 2, bz: 1},
              {label: '下', size: 0, bz: 0},
              {label: '左', size: 2, bz: 1}
            ]},
            {label: '┳', data: [
              {label: '上', size: 0, bz: 0},
              {label: '右', size: 4, bz: 0},
              {label: '下', size: 6, bz: 0},
              {label: '左', size: 4, bz: 0}
            ]},
            {label: '┏', data: [
              {label: '上', size: 3, bz: 0},
              {label: '右', size: 5, bz: 0},
              {label: '下', size: 8, bz: 1},
              {label: '左', size: 6, bz: 1}
            ]},
            {label: '┓', data: [
              {label: '上', size: 3, bz: 0},
              {label: '右', size: 4, bz: 0},
              {label: '下', size: 3, bz: 0},
              {label: '左', size: 9, bz: 0}
            ]},
            {label: '┗', data: [
              {label: '上', size: 5, bz: 1},
              {label: '右', size: 5, bz: 0},
              {label: '下', size: 7, bz: 0},
              {label: '左', size: 6, bz: 0}
            ]},
            {label: '┛', data: [
              {label: '上', size: 6, bz: 1},
              {label: '右', size: 10, bz: 1},
              {label: '下', size: 6, bz: 2},
              {label: '左', size: 5, bz: 0}
            ]}
          ],
          // images: [
          //   {label: '上', size: 8, type: 'jpg'},
          //   {label: '右', size: 9, type: 'jpg'},
          //   {label: '下', size: 10, type: 'webp'},
          //   {label: '左', size: 7, type: 'webp'},
          // ],
          searchQuery: '',
          currentPage: 1,
          pageSize: 6,
          activeName: '■',
          activeName2: '上',
          api: 'http://192.168.1.104:8080/精绝古城'
        }
      },
      computed: {
        // 预览图片列表
        previewImages() {
          return this.images.map(img => img.url);
        },
        // 过滤后的图片列表
        filteredImages() {
          let result = this.images;
          if (this.searchQuery) {
            const query = this.searchQuery.toLowerCase();
            result = result.filter(image => 
              image.title.toLowerCase().includes(query) || 
              image.category.toLowerCase().includes(query)
            );
          }
          return result;
        },
        // 分页后的图片列表
        paginatedImages() {
          const start = (this.currentPage - 1) * this.pageSize;
          const end = start + this.pageSize;
          return this.filteredImages.slice(start, end);
        }
      },
      methods: {
        getImage(item, child, file, isBz=false) {
          if(isBz){
            return `${this.api}/${item.label}/${child.label}/宝藏-${file}.webp`
          }
          return `${this.api}/${item.label}/${child.label}/${file-child.bz}.webp`
        },
        goImage(url){
          window.open(url)
        },
        toggleFavorite(index) {
          this.images[index].favorite = !this.images[index].favorite;
          this.$message({
            message: this.images[index].favorite ? '已添加到收藏' : '已取消收藏',
            type: 'success',
            duration: 1000
          });
        },
        handleSizeChange(val) {
          this.pageSize = val;
        },
        handleCurrentChange(val) {
          this.currentPage = val;
        },
        handleSearch() {
          this.currentPage = 1;
        },
        handleClearSearch() {
          this.searchQuery = '';
          this.currentPage = 1;
        },
        tabChange(tab){
          let item=this.images.find(i=>i.label === tab.name).data
          this.activeName2=item.filter(i=>i.size>0)[0].label
        }
      }
    });
  </script>
</body>
</html>